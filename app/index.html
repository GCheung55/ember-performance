<html>
  <head>
    <title>Ember Performance</title>
    <link rel="stylesheet" href="/assets/vendor.css">
    <link rel="stylesheet" href="/assets/app.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <script type="text/x-handlebars">
      <div class="container">
        <h3 class="text-muted">Ember Performance</h3>
        {{outlet}}
      </div>
    </script>

    <script type="text/x-handlebars" data-template-name="index">
      {{#if report}}
        <h4>Results:</h4>
        <pre class='text-results'>{{{asciiTable}}}</pre>

        {{#if canSubmitStats}}
          <div class='well'>
            {{#unless sent}}
              <p>Would you like to submit your results to help the Ember tuning effort? The server is maintained by
                 by <a href='http://eviltrout.com'>eviltrout</a> and the only identifying information stored is your
                 browser's user agent.</p>

              <button class='btn btn-primary' {{action "submitResults"}}>Submit my Results</button>
              {{#if sending}}
                Sending...
              {{/if}}

              {{#if error}}
                <div class='alert alert-danger'><strong>Error Sending Results</strong> perhaps there is a problem with the remote server?</div>
              {{/if}}
            {{else}}
              Thanks for sending your results.
            {{/unless}}
          </div>
        {{/if}}
        <hr>
      {{/if}}

      <h4>
        Tests:
        <a href {{action "selectAll"}}>All</a> | <a href {{action "selectNone"}}>None</a>
      </h4>

      <div class="form-group">
        {{#each test in model}}
          <div>
            <label>{{input type="checkbox" checked=test.isEnabled}} {{test.name}}</label>
          </div>
        {{/each}}
      </div>

      <h4>Versions:</h4>
      <div class="form-group">
        {{#each emberVersion in emberVersions}}
          <div>
            <label>
              {{input type="checkbox" checked=emberVersion.isEnabled}} {{emberVersion.name}}
              {{#if emberVersion.isCustom}}
                {{#if emberVersion.isEnabled}}
                  <br />PATH: {{input value=emberVersion.path}}
                  <br />COMPILER PATH: {{input value=emberVersion.compilerPath}}
                {{/if}}
              {{/if}}
            </label>
          </div>
        {{/each}}
      </div>

      <label>Feature Flags</label>
      {{#if featureFlags}}
        <table class='table'>
          <tbody>
            {{#each featureFlag in featureFlags}}
              <tr>
                <td style='width: 20%'>{{featureFlag}}</td>
                <td><button class='btn btn-danger btn-xs' {{action "removeFeature" featureFlag}}>remove</button></td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      {{/if}}
      <div class='form-group'>
        {{input value=newFlagName placeholder="Flag Name"}}
        <button {{bind-attr class=":btn :btn-default :btn-xs addFeatureDisabled:disabled"}} {{action "addFeature"}}>Add Feature</button>
      </div>

      <div class='footer'>
        <button class='btn btn-primary' {{action "start"}} {{bind-attr disabled=cantStart}}>Run Tests</button>
        <button class='btn btn-primary' {{action "profile"}} {{bind-attr disabled=cantStart}}>Run Tests with Profile</button>
      </div>
    </script>

    <script src="/assets/app.js"></script>
    <script src="/assets/vendor.js"></script>
  </body>
</html>
